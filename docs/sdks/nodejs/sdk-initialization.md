---
sidebarDepth: 2
pageClass: api-page
title: SDK Initialization
---

## SDK Initialisation

1. Clone the develop branch of the repository <a href="https://github.com/gsmainclusivetechlab/mmapi-nodejs-sdk" target="_blank">mmapi-android-sdk</a>

```shell
git clone git@github.com:gsmainclusivetechlab/mmapi-nodejs-sdk.git -b develop
export MMAPI_NODEJS_SDK=$(pwd)/mmapi-nodejs-sdk
cd $MMAPI_NODEJS_SDK
```

2. Create the file <span class="highlight">config.env</span> with all the environment variables needed to run the SDK. The values used in
this file comes from your MMAPI developer account. The content of the file should look like:

```shell
export CONSUMER_KEY=803qinohvhvkn8gv8q1v5kc5j
export CONSUMER_SECRET=a70fdpaorep27nue66380fld2hp5jc710t214bfentot4j6e6sm
export API_KEY=qQcKL8nJhB2uVuEFr0nld8TJhmVJEIEZ46LToIsO
export SECURITY_OPTION=DEVELOPMENT_LEVEL
export CALLBACK_URL=<see "CALLBACK_URL setup" below>
```

3. Load the config.env environment variables with the following command:

```shell
source config.env
```

4. <span class="highlight">CALLBACK_URL</span> setup

To setup a callback URL to receive the requests for test and debug purposes, you'll need to use <span class="highlight">socat</span> and <span class="highlight">ngrok</span> commands on Linux.

<ol type="a">
  <li>Install the tools</li>

```shell
sudo apt install socat
sudo npm install -g ngrok
```

  <li>Start a socket with <span class="highlight">socat</span> to listen for callback responses:</li>

```shell
socat -v TCP-LISTEN:4444,reuseaddr,fork OPEN:callback.log,create,append
```

  <li>Start <span class="highlight">ngrok</span> to get a public address pointing to <span class="highlight">socat</span> socket:</li>

```shell
ngrok http localhost:4444
```

  <li>Output example for <span class="highlight">ngrok</span>:</li>

```shell
ngrok by @inconshreveable                             (Ctrl+C to quit)
Session Status               online
Session Expires              1 hour, 59 minutes
Version                      2.3.40
Region                       United States (us)
Web                          Interface http://127.0.0.1:4040
Forwarding                   http://0d2d-179-185-140-185.ngrok.io -> http://localhost:4444
Forwarding                   https://0d2d-179-185-140-185.ngrok.io -> http://localhost:4444
Connections                  ttl opn rt1 rt5 p50 p90
                             0 0 0.00 0.00 0.00 0.00
```
</ol>

5. Get the address in red starting with <span class="highlight">https</span> in step 4 â†’ d) and put as the value of <span class="highlight">callback_url</span> in the file
<span class="highlight">config.env</span>. You can use the <span class="highlight">http</span> address as well, but give priority to use <span class="highlight">https</span>.
<svg version="1.1" id="Capa_1" fill="orange" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 34.854 34.855" style="enable-background:new 0 0 34.854 34.855; width: 16px; height: 16px;"
	 xml:space="preserve">
  <g>
    <path d="M34.653,30.47L18.727,2.884c-0.269-0.464-0.764-0.75-1.299-0.75c-0.537,0-1.031,0.286-1.3,0.75L0.202,30.47
      c-0.269,0.464-0.269,1.036,0,1.5s0.763,0.75,1.299,0.75h31.853c0.535,0,1.031-0.286,1.3-0.75
      C34.921,31.506,34.921,30.934,34.653,30.47z M4.099,29.72L17.427,6.634L30.756,29.72H4.099z M15.427,11.677h4V23.51h-4V11.677z
      M15.427,25.507h4v2.919h-4V25.507z"/>
  </g>
</svg> The URL generated by <span class="highlight">ngrok</span> lasts only 1 hour. After that, you'll have to run <span class="highlight">ngrok</span> again and update the
<span class="highlight">callback_url</span> with the new URL.

6. Sample code to initialise the node-js SDK:

```javascript
/**
* MMAPI Node.js SDK dependency
*/
const mmapi = require('../lib/index');
/**
* Set up and return MMAPI Noe.js SDK environment.
*/
const consumerKey = process.env.CONSUMER_KEY
const consumerSecret = process.env.CONSUMER_SECRET;
const apiKey = process.env.API_KEY;
const securityOption = process.env.SECURITY_OPTION; // optional DEVELOPMENT_LEVEL, STANDARD_LEVEL, ENHANCED_LEVEL
const callbackUrl = process.env.CALLBACK_URL;
let environment;

if (process.env.NODE_ENV === 'production') {
  environment = new mmapi.core.LiveEnvironment(consumerKey, consumerSecret, apiKey, securityOption, callbackUrl);
}

environment = new mmapi.core.SandboxEnvironment(consumerKey, consumerSecret, apiKey, securityOption, callbackUrl);

/**
* Returns MMAPI Node.js SDK HTTP client instance with environment.
* Use this instance to invoke MMAPI APIs
*/
let client = new mmapi.core.MobileMoneyApiHttpClient(environment);

console.log("Consumer Key : " + client.environment.consumerKey)
console.log("Consumer Secret : " + client.environment.consumerSecret)
console.log("API Key : " + client.environment.apiKey)
console.log("Environment : " + client.environment.environment)
console.log("Security Level : " + client.environment.securityOption)
console.log("Callback URL : " + client.environment.callbackUrl)
console.log("MMAPI URL : " + client.environment.baseUrl)
```